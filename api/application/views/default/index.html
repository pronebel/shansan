<div class="sub_container" style="padding:20px;">


    <h2>api:model:member</h2>
    <p>
        <label>CMD: <input type="text" name="cmd" value="member_login" /></label>
        <label>json: <input style="width: 300px;" type="text" name="json" value='{"email":"nebel08@163.com","pwd":"1111"}' /></label>
        <button  class="J_apiItem">提交</button>
    </p>

    <p>
        <label>CMD: <input type="text" name="cmd" value="member_signup" /></label>
        <label>json: <input type="text" name="json" value='{"email":"teddd@163.com","pwd":"1111"}' /></label>
        <button  class="J_apiItem">提交</button>
    </p>
    <p>
        <label>CMD: <input type="text" name="cmd" value="member_profile" /></label>
        <label>json: <input type="text" name="json" value='{"uid":"teddd@163.com","pwd":"1111"}' /></label>
        <button  class="J_apiItem">提交</button>
    </p>



    <h2>weibo</h2>
    <p>
        <label>CMD: <input type="text" name="cmd" value="member_login" /></label>
        <label>json: <input style="width: 300px;" type="text" name="json" value='{"email":"nebel08@163.com","pwd":"1111"}' /></label>
        <button  class="J_apiItem">提交</button>
    </p>


    <script>
        function jsonString(data) {
            return encodeURIComponent(JSON.stringify(data))
        }

        $(document).ready(function(){

            $("body").delegate(".J_apiItem","click",function(ev){


                var btItem = $(ev.currentTarget);

                var _item = btItem.closest("p");
                var cmd =  $.trim(_item.find('input[name=cmd]').val());
                var jsonStr = $.trim(_item.find('input[name=json]').val());

                var json=  JSON.parse(jsonStr);
                var postData = {
                    cmd:cmd,
                    json:jsonString(json)
                }

                console.log(postData);
                $.ajax({
                    type: "POST",
                    url: 'api',
                    data: postData,
                    success: function(data){
                        console.log(JSON.stringify(data));
                    }
                });
            })
        })


    </script>



</div>
